var writeUsBtn=document.querySelector(".write_us_btn"),writeUsModal=document.querySelector(".popup_write_us"),writeUsForm=writeUsModal.querySelector("form"),inputName=writeUsModal.querySelector("#name"),inputEmail=writeUsModal.querySelector("#email"),mailText=writeUsModal.querySelector("#mail_text"),mapContainer=document.querySelector(".map_container"),mapModal=document.querySelector(".popup_map"),serviceList=document.querySelector(".services_list"),serviceInfoItems=document.querySelector(".service_info_item"),isStorageSupport=!0,storage="";try{storage=localStorage.getItem("inputName")}catch(e){isStorageSupport=!1}writeUsBtn.addEventListener("click",function(e){e.preventDefault(),writeUsModal.classList.add("modal_show"),storage?(inputName.value=storage,inputEmail.value=storage,mailText.focus()):inputName.focus()}),writeUsModal.querySelector(".close_modal").addEventListener("click",function(e){writeUsModal.classList.remove("modal_show"),writeUsModal.classList.remove("modal_error"),inputName.classList.remove("input_error"),inputEmail.classList.remove("input_error"),mailText.classList.remove("input_error")}),mapContainer.addEventListener("click",function(e){e.preventDefault(),mapModal.classList.add("modal_show")}),mapModal.querySelector(".close_modal").addEventListener("click",function(e){mapModal.classList.remove("modal_show")}),serviceList.addEventListener("click",function(e){if(!e.target.hasAttribute("data-service-btn"))return!1;e.preventDefault(),"delivery_btn"==e.target.getAttribute("data-service-btn")?(delivery_service.classList.remove("show_off"),delivery_service_btn.classList.add("service_active"),guarantee_service.classList.add("show_off"),guarantee_service_btn.classList.remove("service_active"),credit_service.classList.add("show_off"),credit_service_btn.classList.remove("service_active")):"guarantee_btn"==e.target.getAttribute("data-service-btn")?(delivery_service.classList.add("show_off"),delivery_service_btn.classList.remove("service_active"),guarantee_service.classList.remove("show_off"),guarantee_service_btn.classList.add("service_active"),credit_service.classList.add("show_off"),credit_service_btn.classList.remove("service_active")):"credit_btn"==e.target.getAttribute("data-service-btn")&&(delivery_service.classList.add("show_off"),delivery_service_btn.classList.remove("service_active"),guarantee_service.classList.add("show_off"),guarantee_service_btn.classList.remove("service_active"),credit_service.classList.remove("show_off"),credit_service_btn.classList.add("service_active"))}),writeUsForm.addEventListener("submit",function(e){inputName.value&&email.value&&mailText.value?isStorageSupport&&(localStorage.setItem("inputName",inputName.value),localStorage.setItem("inputEmail",inputEmail.value)):(e.preventDefault(),inputName.value?inputName.classList.remove("input_error"):inputName.classList.add("input_error"),inputEmail.value?inputEmail.classList.remove("input_error"):inputEmail.classList.add("input_error"),mailText.value?mailText.classList.remove("input_error"):mailText.classList.add("input_error"),writeUsModal.classList.remove("modal_error"),writeUsModal.offsetWidth=writeUsModal.offsetWidth,writeUsModal.classList.add("modal_error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),writeUsModal.classList.contains("modal_show")?(writeUsModal.classList.remove("modal_show"),writeUsModal.classList.remove("modal_error")):mapModal.classList.contains("modal_show")&&mapModal.classList.remove("modal_show"))});